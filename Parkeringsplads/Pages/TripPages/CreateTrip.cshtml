@page
@model Parkeringsplads.Pages.TripPages.CreateTripModel
@{
    ViewData["Title"] = "Opret tur";
}

<h2>Opret tur</h2>

<!-- Retning -->
<form method="get" class="mb-4">
    <input type="hidden" name="SelectedCarId" value="@Model.SelectedCarId" />
    <input type="hidden" name="SelectedAddress" value="@Model.SelectedAddress" />
    <input type="hidden" name="CustomAddress" value="@Model.CustomAddress" />
    <input type="hidden" name="UseCustomAddress" value="@Model.UseCustomAddress" />

    <label class="form-label">Retning</label><br />
    <input type="radio" name="Direction" value="ToSchool" onchange="this.form.submit()" @(Model.Direction == "ToSchool" ? "checked" : "") />
    <label>Til skole</label><br />
    <input type="radio" name="Direction" value="FromSchool" onchange="this.form.submit()" @(Model.Direction == "FromSchool" ? "checked" : "") />
    <label>Fra skole</label>
</form>

<!-- Bilvalg -->
<form method="get" class="mb-4">
    <input type="hidden" name="Direction" value="@Model.Direction" />
    <input type="hidden" name="SelectedAddress" value="@Model.SelectedAddress" />
    <input type="hidden" name="CustomAddress" value="@Model.CustomAddress" />
    <input type="hidden" name="UseCustomAddress" value="@Model.UseCustomAddress" />

    <label class="form-label">Vælg bil</label>
    <select name="SelectedCarId" class="form-control" onchange="this.form.submit()">
        @foreach (var car in Model.Cars)
        {
            <option value="@car.CarId" selected="@(car.CarId == Model.SelectedCarId)">
                @car.CarModel (Bilsæder: @car.CarCapacity)
            </option>
        }
    </select>
</form>

<!-- Adressevalg -->
<form method="get" class="mb-4">
    <input type="hidden" name="Direction" value="@Model.Direction" />
    <input type="hidden" name="SelectedCarId" value="@Model.SelectedCarId" />
    <label>Vælg en af dine adresser</label>
    <select name="SelectedAddress" class="form-control" onchange="this.form.submit()" @(Model.UseCustomAddress ? "disabled" : "")>
        @foreach (var addr in Model.UserAddresses)
        {
            <option value="@addr" selected="@(addr == Model.SelectedAddress)">
                @addr
            </option>
        }
    </select>

    <div class="form-check mt-2">
        <input type="checkbox" class="form-check-input" name="UseCustomAddress" value="true" id="useCustom" onchange="this.form.submit()" @(Model.UseCustomAddress ? "checked" : "") />
        <label class="form-check-label" for="useCustom">Indtast selv adresse</label>
    </div>

    <div class="mt-2">
        <input name="CustomAddress" value="@Model.CustomAddress" class="form-control" placeholder="Egen adresse" @(Model.UseCustomAddress ? "" : "disabled") />
    </div>
    <div class="mt-2">
        <button type="submit" class="btn btn-outline-secondary btn-sm">
            Brug denne adresse som start/slutpunkt
        </button>
    </div>
</form>

<!-- Turformular -->
<form method="post">
    <input type="hidden" asp-for="Direction" />
    <input type="hidden" asp-for="SelectedCarId" />
    <input type="hidden" asp-for="SelectedAddress" />
    <input type="hidden" asp-for="CustomAddress" />
    <input type="hidden" asp-for="UseCustomAddress" />

    <div class="mb-3">
        <label>Fra</label>
        <input type="text" class="form-control" value="@Model.Trip.FromDestination" readonly />
    </div>

    <div class="mb-3">
        <label>Til</label>
        <input type="text" class="form-control" value="@Model.Trip.ToDestination" readonly />
    </div>

    <div class="mb-3">
        <label>Dato</label>
        <input asp-for="Trip.TripDate" type="date" class="form-control" />
    </div>

    <div class="mb-3">
        <label>Tidspunkt</label>
        <input asp-for="Trip.TripTime" type="time" class="form-control" />
    </div>

    <div class="mb-3">
        <label>Antal passagersæder</label>
        <select asp-for="Trip.TripSeats" class="form-control">
            @foreach (var seat in Model.SeatOptions)
            {
                <option value="@seat">@seat</option>
            }
        </select>
    </div>

    <button type="submit" class="btn btn-primary">Opret tur</button>
</form>
